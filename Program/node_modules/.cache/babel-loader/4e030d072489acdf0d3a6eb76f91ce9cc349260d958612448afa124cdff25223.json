{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Marvi\\\\IdeaProjects\\\\NFE114\\\\Projet NFP119\\\\src\\\\components\\\\UserAddTaskForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { getTasks, updateTaskById } from \"../services/task.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserAddTaskForm = _ref => {\n  _s();\n  let {\n    onSubmit,\n    userId\n  } = _ref;\n  const [tasks, setTasks] = useState([]);\n  const [formData, setFormData] = useState({\n    task: null\n  });\n  useEffect(() => {\n    const getData = async () => {\n      const tasks = await getTasks();\n      setTasks(tasks);\n    };\n    getData();\n  }, []);\n  const handleSelectChange = event => {\n    const taskId = event.target.value;\n    const task = (tasks === null || tasks === void 0 ? void 0 : tasks.find(t => t._id === taskId)) || null;\n    setFormData({\n      task\n    });\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    const {\n      task\n    } = formData;\n    if (task) {\n      task.userId = userId;\n      updateTaskById(task._id, task).then(() => {\n        console.log(userId);\n        onSubmit(formData);\n        setFormData({\n          task: null\n        });\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"T\\xE2che :\", /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: handleSelectChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this), tasks === null || tasks === void 0 ? void 0 : tasks.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: t._id,\n          children: t.title\n        }, t._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Ajouter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(UserAddTaskForm, \"xqABinsxy4j86lApnIQTpvTmtu4=\");\n_c = UserAddTaskForm;\nexport default UserAddTaskForm;\nvar _c;\n$RefreshReg$(_c, \"UserAddTaskForm\");","map":{"version":3,"names":["React","useState","useEffect","getTasks","updateTaskById","jsxDEV","_jsxDEV","UserAddTaskForm","_ref","_s","onSubmit","userId","tasks","setTasks","formData","setFormData","task","getData","handleSelectChange","event","taskId","target","value","find","t","_id","handleSubmit","preventDefault","then","console","log","children","onChange","fileName","_jsxFileName","lineNumber","columnNumber","map","title","type","_c","$RefreshReg$"],"sources":["C:/Users/Marvi/IdeaProjects/NFE114/Projet NFP119/src/components/UserAddTaskForm.tsx"],"sourcesContent":["import React, { FC, useState, useEffect } from \"react\";\r\nimport Task from \"../types/Task\";\r\nimport { getTasks, updateTaskById } from \"../services/task.service\";\r\n\r\ninterface FormProps {\r\n    onSubmit: (formData: any) => void;\r\n    userId: string;\r\n}\r\n\r\ninterface FormData {\r\n    task: Task | null;\r\n}\r\n\r\nconst UserAddTaskForm: FC<FormProps> = ({ onSubmit, userId }: FormProps) => {\r\n    const [tasks, setTasks] = useState<Task[] | null>([]);\r\n    const [formData, setFormData] = useState<FormData>({\r\n        task: null,\r\n    });\r\n\r\n    useEffect(() => {\r\n        const getData = async () => {\r\n            const tasks: Task[] = await getTasks();\r\n            setTasks(tasks);\r\n        };\r\n        getData();\r\n    }, []);\r\n\r\n    const handleSelectChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const taskId = event.target.value;\r\n        const task = tasks?.find((t) => t._id === taskId) || null;\r\n        setFormData({ task });\r\n    };\r\n\r\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault();\r\n        const { task } = formData;\r\n        if (task) {\r\n            task.userId = userId;\r\n            updateTaskById(task._id, task).then(() => {\r\n                console.log(userId);\r\n                onSubmit(formData);\r\n                setFormData({ task: null });\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <label>\r\n                TÃ¢che :\r\n                <select onChange={handleSelectChange}>\r\n                    <option value=\"\"></option>\r\n                    {tasks?.map((t) => (\r\n                        <option key={t._id} value={t._id}>\r\n                            {t.title}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </label>\r\n            <button type=\"submit\">Ajouter</button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default UserAddTaskForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}